<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="E1ct36DyjSpaeX5NMAVsyzCjDs8-dQxGThgvw2i1yg0">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"gitslagga.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.21.0","exturl":true,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/config.min.js"></script>

    <meta name="description" content="6 – 重定向在这一课中，我们将介绍命令行可能最酷炫的功能，那就是I&#x2F;O重定向。这里的“I&#x2F;O”代表输入&#x2F;输出，通过这个功能，我们可以将命令的输入和输出重定向到文件，并将多个命令连接成强大的命令管道。为了展示这一功能，我们将介绍以下命令：  cat – 连接文件 sort – 对文本行进行排序 uniq – 报告或省略重复行 grep – 打印与模式匹配的行 wc –">
<meta property="og:type" content="article">
<meta property="og:title" content="重定向">
<meta property="og:url" content="https://gitslagga.github.io/2024/03/6-redirection/index.html">
<meta property="og:site_name" content="计算机那些事">
<meta property="og:description" content="6 – 重定向在这一课中，我们将介绍命令行可能最酷炫的功能，那就是I&#x2F;O重定向。这里的“I&#x2F;O”代表输入&#x2F;输出，通过这个功能，我们可以将命令的输入和输出重定向到文件，并将多个命令连接成强大的命令管道。为了展示这一功能，我们将介绍以下命令：  cat – 连接文件 sort – 对文本行进行排序 uniq – 报告或省略重复行 grep – 打印与模式匹配的行 wc –">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-03-07T14:25:30.000Z">
<meta property="article:modified_time" content="2025-06-06T06:13:40.948Z">
<meta property="article:author" content="Slagga">
<meta property="article:tag" content="TLCL">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://gitslagga.github.io/2024/03/6-redirection/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://gitslagga.github.io/2024/03/6-redirection/","path":"2024/03/6-redirection/","title":"重定向"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>重定向 | 计算机那些事</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0E2T2VNH5S"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-0E2T2VNH5S","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/analytics/google-analytics.min.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">计算机那些事</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">软件开发、维护和升级</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">229</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">78</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">28</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E2%80%93-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">1.</span> <span class="nav-text">6 – 重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF"><span class="nav-number">1.1.</span> <span class="nav-text">标准输入、输出和错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA"><span class="nav-number">1.2.</span> <span class="nav-text">重定向标准输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%A0%87%E5%87%86%E9%94%99%E8%AF%AF"><span class="nav-number">1.3.</span> <span class="nav-text">重定向标准错误</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%86%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%92%8C%E6%A0%87%E5%87%86%E9%94%99%E8%AF%AF%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.1.</span> <span class="nav-text">将标准输出和标准错误重定向到一个文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E8%BE%93%E5%87%BA"><span class="nav-number">1.3.2.</span> <span class="nav-text">处理不需要的输出</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8Unix%E6%96%87%E5%8C%96%E4%B8%AD%E7%9A%84-dev-null"><span class="nav-number">1.4.</span> <span class="nav-text">在Unix文化中的&#x2F;dev&#x2F;null</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5"><span class="nav-number">1.5.</span> <span class="nav-text">重定向标准输入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cat-%E2%80%93-%E8%BF%9E%E6%8E%A5%E6%96%87%E4%BB%B6"><span class="nav-number">1.5.1.</span> <span class="nav-text">cat – 连接文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%A1%E9%81%93"><span class="nav-number">1.6.</span> <span class="nav-text">管道</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">1.6.1.</span> <span class="nav-text">过滤器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#uniq-%E6%8A%A5%E5%91%8A%E6%88%96%E7%9C%81%E7%95%A5%E9%87%8D%E5%A4%8D%E8%A1%8C"><span class="nav-number">1.6.2.</span> <span class="nav-text">uniq - 报告或省略重复行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wc-%E2%80%93-%E6%89%93%E5%8D%B0%E8%A1%8C%E3%80%81%E5%8D%95%E8%AF%8D%E5%92%8C%E5%AD%97%E8%8A%82%E8%AE%A1%E6%95%B0"><span class="nav-number">1.6.3.</span> <span class="nav-text">wc – 打印行、单词和字节计数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#grep-%E2%80%93-%E6%89%93%E5%8D%B0%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%A1%8C"><span class="nav-number">1.6.4.</span> <span class="nav-text">grep – 打印匹配模式的行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#head-tail-%E2%80%93-%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6%E7%9A%84%E5%89%8D%E9%83%A8%E5%88%86-%E5%90%8E%E9%83%A8%E5%88%86"><span class="nav-number">1.6.5.</span> <span class="nav-text">head &#x2F; tail – 打印文件的前部分 &#x2F; 后部分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tee-%E2%80%93-%E4%BB%8E%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%AF%BB%E5%8F%96%E5%B9%B6%E5%B0%86%E5%85%B6%E8%BE%93%E5%87%BA%E5%88%B0%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%92%8C%E6%96%87%E4%BB%B6"><span class="nav-number">1.6.6.</span> <span class="nav-text">tee – 从标准输入读取并将其输出到标准输出和文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">1.7.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E6%98%AF%E5%85%B3%E4%BA%8E%E6%83%B3%E8%B1%A1%E5%8A%9B%E7%9A%84"><span class="nav-number">1.8.</span> <span class="nav-text">Linux 是关于想象力的</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Slagga"
      src="https://avatars.githubusercontent.com/u/19620432">
  <p class="site-author-name" itemprop="name">Slagga</p>
  <div class="site-description" itemprop="description">Computer Things - Software Development, Maintenance and Upgrade</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">229</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">78</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdHNsYWdnYQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gitslagga"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnNsYWdnYUBkdWNrLmNvbQ==" title="E-Mail → mailto:slagga@duck.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gitslagga.github.io/2024/03/6-redirection/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/19620432">
      <meta itemprop="name" content="Slagga">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="计算机那些事">
      <meta itemprop="description" content="Computer Things - Software Development, Maintenance and Upgrade">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="重定向 | 计算机那些事">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          重定向
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-03-07 22:25:30" itemprop="dateCreated datePublished" datetime="2024-03-07T22:25:30+08:00">2024-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-06-06 14:13:40" itemprop="dateModified" datetime="2025-06-06T14:13:40+08:00">2025-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="6-–-重定向"><a href="#6-–-重定向" class="headerlink" title="6 – 重定向"></a>6 – 重定向</h2><p>在这一课中，我们将介绍命令行可能最酷炫的功能，那就是<strong>I&#x2F;O重定向</strong>。这里的“I&#x2F;O”代表<strong>输入&#x2F;输出</strong>，通过这个功能，我们可以将命令的输入和输出重定向到文件，并将多个命令连接成强大的命令<strong>管道</strong>。为了展示这一功能，我们将介绍以下命令：</p>
<ul>
<li>cat – 连接文件</li>
<li>sort – 对文本行进行排序</li>
<li>uniq – 报告或省略重复行</li>
<li>grep – 打印与模式匹配的行</li>
<li>wc – 打印每个文件的换行符、单词和字节计数</li>
<li>head – 输出文件的前部分</li>
<li>tail – 输出文件的后部分</li>
<li>tee – 从标准输入读取并写入标准输出和文件</li>
</ul>
<span id="more"></span>

<h3 id="标准输入、输出和错误"><a href="#标准输入、输出和错误" class="headerlink" title="标准输入、输出和错误"></a>标准输入、输出和错误</h3><p>到目前为止，我们使用的许多程序都会产生某种形式的输出。这些输出通常包括两种类型：</p>
<ul>
<li>程序的结果，也就是程序设计要产生的数据</li>
<li>状态和错误消息，告诉我们程序的执行情况</li>
</ul>
<p>如果我们查看像<code>ls</code>这样的命令，可以看到它在屏幕上显示其结果和错误消息。</p>
<p>遵循“一切都是文件”的Unix主题，像<code>ls</code>这样的程序实际上会将它们的结果发送到一个称为<strong>标准输出</strong>（通常表示为<strong>stdout</strong>）的特殊文件，而将它们的状态消息发送到另一个称为<strong>标准错误</strong>（<strong>stderr</strong>）的文件。默认情况下，标准输出和标准错误都链接到屏幕，而不保存到磁盘文件中。</p>
<p>此外，许多程序从一个称为<strong>标准输入</strong>（<strong>stdin</strong>）的设施中获取输入，默认情况下与键盘相连。</p>
<p>I&#x2F;O重定向允许我们改变输出的目的地和输入的来源。通常，输出会显示在屏幕上，输入来自键盘，但通过I&#x2F;O重定向，我们可以改变这一点。</p>
<h3 id="重定向标准输出"><a href="#重定向标准输出" class="headerlink" title="重定向标准输出"></a>重定向标准输出</h3><p>I&#x2F;O重定向允许我们重新定义标准输出的位置。要将标准输出重定向到另一个文件而不是屏幕，我们使用<code>&gt;</code>重定向操作符，后面跟着文件的名称。为什么我们要这么做呢？通常，将命令的输出存储在文件中是很有用的。例如，我们可以告诉shell将<code>ls</code>命令的输出发送到名为<code>ls-output.txt</code>的文件，而不是屏幕上：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /usr/bin &gt; ls-output.txt</span><br></pre></td></tr></table></figure>

<p>在这里，我们创建了<code>/usr/bin</code>目录的长列表，并将结果发送到名为<code>ls-output.txt</code>的文件中。让我们检查这个命令的重定向输出，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l ls-output.txt</span><br><span class="line">-rw-rw-r-- 1 me me 167878 2018-02-01 15:07 ls-output.txt</span><br></pre></td></tr></table></figure>

<p>很好 — 一个很大的文本文件。如果我们用<code>less</code>查看这个文件，我们会看到<code>ls-output.txt</code>文件确实包含了我们<code>ls</code>命令的结果。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ less ls-output.txt</span><br></pre></td></tr></table></figure>

<p>现在，让我们重复我们的重定向测试，但这次有一个小变化。我们将更改目录的名称为一个不存在的名称：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /bin/usr &gt; ls-output.txt</span><br><span class="line">ls: cannot access /bin/usr: No such file or directory</span><br></pre></td></tr></table></figure>

<p>我们收到了一个错误消息。这很有道理，因为我们指定了不存在的目录 <code>/bin/usr</code>，但为什么错误消息会显示在屏幕上，而不是被重定向到文件 <code>ls-output.txt</code> 呢？答案是 <code>ls</code> 程序并没有将其错误消息发送到标准输出。相反，像大多数编写良好的Unix程序一样，它将其错误消息发送到标准错误。因为我们只重定向了标准输出而没有重定向标准错误，所以错误消息仍然发送到了屏幕上。我们稍后将看到如何重定向标准错误，但首先让我们看看我们的输出文件发生了什么：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l ls-output.txt</span><br><span class="line">-rw-rw-r-- 1 me me 0 2018-02-01 15:08 ls-output.txt</span><br></pre></td></tr></table></figure>

<p>该文件现在长度为零！这是因为当我们使用“&gt;”重定向操作符重定向输出时，目标文件总是从开始处被重新写入。由于我们的 ls 命令没有生成任何结果，只有一个错误消息，重定向操作开始重新写入文件，然后因为错误而停止，导致其被截断。实际上，如果我们需要实际截断一个文件（或创建一个新的空文件），我们可以使用这样的技巧：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ &gt; ls-output.txt</span><br></pre></td></tr></table></figure>

<p>简单地使用重定向操作符而没有在其之前添加任何命令将截断一个现有的文件或创建一个新的空文件。</p>
<p>那么，我们如何将重定向的输出追加到一个文件中，而不是从开始处覆盖文件呢？为此，我们使用<code>&gt;&gt;</code>重定向操作符，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /usr/bin &gt;&gt; ls-output.txt</span><br></pre></td></tr></table></figure>

<p>使用<code>&gt;&gt;</code>操作符会导致输出被追加到文件中。如果文件还不存在，它将会被创建，就像使用<code>&gt;</code>操作符一样。让我们进行测试：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /usr/bin &gt;&gt; ls-output.txt</span><br><span class="line">[me@linuxbox ~]$ ls -l /usr/bin &gt;&gt; ls-output.txt</span><br><span class="line">[me@linuxbox ~]$ ls -l /usr/bin &gt;&gt; ls-output.txt</span><br><span class="line">[me@linuxbox ~]$ ls -l ls-output.txt</span><br><span class="line">-rw-rw-r-- 1 me me 503634 2018-02-01 15:45 ls-output.txt</span><br></pre></td></tr></table></figure>

<p>重复执行该命令三次，导致输出文件的大小增加了三倍。</p>
<h3 id="重定向标准错误"><a href="#重定向标准错误" class="headerlink" title="重定向标准错误"></a>重定向标准错误</h3><p>重定向标准错误没有一个专用的重定向操作符那样简单。为了重定向标准错误，我们必须引用其<em>文件描述符</em>。一个程序可以在多个编号的文件流上产生输出。虽然我们已经提到这些文件流的前三个分别为标准输入、输出和错误，但shell在内部将它们称为文件描述符0、1和2。shell提供了一种使用文件描述符号码进行重定向的表示法。因为标准错误与文件描述符号码2相同，所以我们可以使用这种表示法来重定向标准错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /bin/usr 2&gt; ls-error.txt</span><br></pre></td></tr></table></figure>

<p>文件描述符“2”紧随重定向操作符之前，用于将标准错误重定向到文件ls-error.txt。</p>
<h4 id="将标准输出和标准错误重定向到一个文件"><a href="#将标准输出和标准错误重定向到一个文件" class="headerlink" title="将标准输出和标准错误重定向到一个文件"></a>将标准输出和标准错误重定向到一个文件</h4><p>有些情况下，我们可能希望将一个命令的所有输出都捕获到一个单一的文件中。为了做到这一点，我们必须同时重定向标准输出和标准错误。有两种方法可以实现这一点。这里展示的是传统的方法，适用于旧版本的shell：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /bin/usr &gt; ls-output.txt 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>使用这种方法，我们进行了两次重定向。首先，我们将标准输出重定向到文件ls-output.txt，然后使用符号2&gt;&amp;1将文件描述符2（标准错误）重定向到文件描述符1（标准输出）。</p>
<p><strong>请注意，重定向的顺序很重要。</strong> 必须在重定向标准输出之后始终*重定向标准错误，否则它将不起作用。</p>
<p>以下示例将标准错误重定向到文件ls-output.txt：</p>
<p>&gt;ls-output.txt 2&gt;&amp;1</p>
<p>然而，如果顺序改为以下方式，标准错误将被重定向到屏幕。</p>
<p>2&gt;&amp;1 &gt;ls-output.txt</p>
<p>最近的bash版本提供了一个更简洁的方法来执行这种组合重定向，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /bin/usr &amp;&gt; ls-output.txt</span><br></pre></td></tr></table></figure>

<p>在这个例子中，我们使用单一符号 &amp;&gt; 来将标准输出和标准错误都重定向到文件 ls-output.txt。我们还可以像这样将标准输出和标准错误流追加到一个单一文件中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /bin/usr &amp;&gt;&gt; ls-output.txt</span><br></pre></td></tr></table></figure>

<h4 id="处理不需要的输出"><a href="#处理不需要的输出" class="headerlink" title="处理不需要的输出"></a>处理不需要的输出</h4><p>有时，“沉默是金”，我们不希望从命令中得到输出，只是想将其丢弃。这特别适用于错误和状态消息。系统提供了一种方法来做到这一点，即通过将输出重定向到一个名为“&#x2F;dev&#x2F;null”的特殊文件。这个文件是一个系统设备，通常被称为“位桶”，它接受输入但不对其进行任何处理。为了抑制命令的错误消息，我们这样做：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /bin/usr 2&gt; /dev/null</span><br></pre></td></tr></table></figure>

<h3 id="在Unix文化中的-dev-null"><a href="#在Unix文化中的-dev-null" class="headerlink" title="在Unix文化中的&#x2F;dev&#x2F;null"></a>在Unix文化中的&#x2F;dev&#x2F;null</h3><p>位桶是一个古老的Unix概念，由于其普遍性，它已经出现在Unix文化的许多部分中。当有人说他&#x2F;她正在将您的评论发送到&#x2F;dev&#x2F;null时，现在您知道这意味着什么。有关更多示例，请参阅<span class="exturl" data-url="aHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9kZXYvbnVsbA==">维基百科上的&#x2F;dev&#x2F;null文章<i class="fa fa-external-link-alt"></i></span>。</p>
<h3 id="重定向标准输入"><a href="#重定向标准输入" class="headerlink" title="重定向标准输入"></a>重定向标准输入</h3><p>到目前为止，我们还没有遇到任何使用标准输入的命令（实际上我们有，但稍后我们将揭示这个惊喜），所以我们需要介绍一个。</p>
<h4 id="cat-–-连接文件"><a href="#cat-–-连接文件" class="headerlink" title="cat – 连接文件"></a>cat – 连接文件</h4><p>cat命令读取一个或多个文件，并将它们复制到标准输出，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat [file...]</span><br></pre></td></tr></table></figure>

<p>在大多数情况下，我们可以认为cat类似于DOS中的TYPE命令。我们可以使用它来显示文件而不分页。例如，以下命令将显示文件ls-output.txt的内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ cat ls-output.txt</span><br></pre></td></tr></table></figure>

<p>cat经常用于显示短文本文件。由于cat可以接受多个文件作为参数，因此它也可以用来将文件连接在一起。假设我们下载了一个被分割成多个部分的大文件（在Usenet上，多媒体文件经常以这种方式被分割），我们想要将它们重新连接在一起。如果这些文件命名为：movie.mpeg.001、movie.mpeg.002 … movie.mpeg.099，我们可以使用以下命令将它们重新连接起来：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat movie.mpeg.0* &gt; movie.mpeg</span><br></pre></td></tr></table></figure>

<p>由于通配符总是按照排序顺序展开，所以参数会按正确的顺序排列。</p>
<p>这都很好，但这与标准输入有什么关系呢？目前还没有关系，但让我们尝试另一件事情。如果我们不带任何参数输入cat会发生什么？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ cat</span><br></pre></td></tr></table></figure>

<p>什么也不会发生，它就像被挂起了一样静止不动。看起来可能是这样，但它实际上确实在按照它应该执行的方式进行操作。</p>
<p>如果没有给cat提供任何参数，它会从标准输入读取数据，而标准输入默认是连接到键盘的，所以它在等待我们输入！尝试添加以下文本并按Enter键：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ cat</span><br><span class="line">The quick brown fox jumped over the lazy dog.</span><br></pre></td></tr></table></figure>

<p>接下来，按下 Ctrl 键并同时按“d”键（即，Ctrl-d）告诉 cat 它已经在标准输入上达到了文件结束（EOF）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ cat</span><br><span class="line">The quick brown fox jumped over the lazy dog.</span><br><span class="line">The quick brown fox jumped over the lazy dog.</span><br></pre></td></tr></table></figure>

<p>在没有文件名参数的情况下，cat 将标准输入复制到标准输出，所以我们看到我们的文本行被重复显示。我们可以利用这种行为来创建短文本文件。假设我们想要创建一个名为 lazy_dog.txt 的文件，其中包含我们示例中的文本。我们会这样做：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ cat &gt; lazy_dog.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.</span><br></pre></td></tr></table></figure>

<p>在命令后输入我们想要放入文件中的文本。记得在最后按下 Ctrl-d。使用命令行，我们实现了世界上最简单的文字处理器！为了查看我们的结果，我们可以使用 cat 再次将文件复制到 stdout。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ cat lazy_dog.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.</span><br></pre></td></tr></table></figure>

<p>现在我们知道 cat 如何接受标准输入，除了文件名参数之外，让我们尝试重定向标准输入。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ cat &lt; lazy_dog.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.</span><br></pre></td></tr></table></figure>

<p>使用 &lt; 重定向运算符，我们将标准输入的来源从键盘更改为文件 lazy_dog.txt。我们看到结果与传递单个文件名参数相同。与传递文件名参数相比，这并不特别有用，但它展示了如何使用文件作为标准输入的来源。其他命令更好地利用了标准输入，我们很快就会看到。</p>
<p>在我们继续之前，查看一下 cat 的 man 页面，因为它有几个有趣的选项。</p>
<h3 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h3><p>命令从标准输入读取数据并发送到标准输出的能力是由一个 shell 功能称为 <em>管道</em> 所利用的。使用管道运算符 |（竖线），一个命令的标准输出可以 <em>管道化</em> 到另一个命令的标准输入。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 | command2</span><br></pre></td></tr></table></figure>

<p>为了充分展示这一点，我们需要一些命令。还记得我们说过有一个我们已经知道接受标准输入的命令吗？那就是 <code>less</code>。我们可以使用 <code>less</code> 逐页显示任何将其结果发送到标准输出的命令的输出：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls -l /usr/bin | less</span><br></pre></td></tr></table></figure>

<p>这非常方便！使用这种技术，我们可以方便地检查任何生成标准输出的命令的输出。</p>
<p><strong>&gt; 和 | 之间的区别</strong>乍一看，可能很难理解管道运算符 | 与重定向运算符 &gt; 所执行的重定向之间的区别。简单地说，重定向运算符将一个命令与一个文件连接起来，而管道运算符将一个命令的输出与第二个命令的输入连接起来。<em>command1</em> &gt; <em>file1</em> 和 <em>command1</em> | <em>command2</em>。很多人在学习管道时会尝试以下操作，“只是为了看看会发生什么”：<em>command1</em> &gt; <em>command2</em>。答案：有时会发生非常糟糕的事情。</p>
<p>这里有一个实际的例子，是一位管理员正在管理一个基于 Linux 的服务器设备。作为超级用户，他做了以下操作：</p>
<p># cd &#x2F;usr&#x2F;bin</p>
<p># ls &gt; less</p>
<p>第一个命令将他放在了大多数程序存储的目录中，而第二个命令告诉 shell 用 <code>ls</code> 命令的输出覆盖 <code>less</code> 文件。由于 &#x2F;usr&#x2F;bin 目录已经包含了一个名为 <code>less</code> 的文件（即 <code>less</code> 程序），第二个命令用 <code>ls</code> 的文本覆盖了 <code>less</code> 程序文件，从而破坏了他系统上的 <code>less</code> 程序。</p>
<p>这里的教训是，重定向运算符会默默地创建或覆盖文件，所以你需要非常尊重它。</p>
<h4 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h4><p>管道经常被用来对数据执行复杂的操作。可以将多个命令组合成一个管道。经常这样使用的命令被称为 <em>过滤器</em>。过滤器接收输入，以某种方式更改它，然后输出它。我们首先尝试的是 <code>sort</code>。想象一下，如果我们想要制作 <code>/bin</code> 和 <code>/usr/bin</code> 中所有可执行程序的合并列表，并按排序顺序排列它们，然后查看结果列表：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls /bin /usr/bin | sort | less</span><br></pre></td></tr></table></figure>

<p>由于我们指定了两个目录（&#x2F;bin 和 &#x2F;usr&#x2F;bin），<code>ls</code> 的输出本来会包含两个排序列表，每个目录一个。通过在我们的管道中包括 <code>sort</code>，我们改变了数据以生成一个单一的、排序过的列表。</p>
<h4 id="uniq-报告或省略重复行"><a href="#uniq-报告或省略重复行" class="headerlink" title="uniq - 报告或省略重复行"></a>uniq - 报告或省略重复行</h4><p><code>uniq</code> 命令经常与 <code>sort</code> 一起使用。<code>uniq</code> 接受来自标准输入或单个文件名参数（有关详细信息，请参阅 <code>uniq</code> 手册页）的排序数据列表，并默认情况下从列表中删除任何重复项。因此，为了确保我们的列表没有重复项（也就是说，在 <code>/bin</code> 和 <code>/usr/bin</code> 目录中都出现的同名程序），我们将在我们的管道中添加 <code>uniq</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls /bin /usr/bin | sort | uniq | less</span><br></pre></td></tr></table></figure>

<p>在这个例子中，我们使用 <code>uniq</code> 从 <code>sort</code> 命令的输出中删除任何重复项。如果我们想看到重复项的列表，我们可以像这样给 <code>uniq</code> 添加“-d”选项：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls /bin /usr/bin | sort | uniq -d | less</span><br></pre></td></tr></table></figure>

<h4 id="wc-–-打印行、单词和字节计数"><a href="#wc-–-打印行、单词和字节计数" class="headerlink" title="wc – 打印行、单词和字节计数"></a>wc – 打印行、单词和字节计数</h4><p><code>wc</code>（word count）命令用于显示文件中包含的行数、单词数和字节数。以下是一个示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ wc ls-output.txt</span><br><span class="line"> 7902 64566 503634 ls-output.txt</span><br></pre></td></tr></table></figure>

<p>在这种情况下，它打印出三个数字：<code>ls-output.txt</code> 中包含的行数、单词数和字节数。与我们之前的命令一样，如果没有命令行参数执行它，<code>wc</code> 会接受标准输入。“-l”选项限制其输出只报告行数。将其添加到管道中是计数的一种方便方式。要查看我们排序列表中的项目数，我们可以这样做：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls /bin /usr/bin | sort | uniq | wc -l</span><br><span class="line">2728</span><br></pre></td></tr></table></figure>

<h4 id="grep-–-打印匹配模式的行"><a href="#grep-–-打印匹配模式的行" class="headerlink" title="grep – 打印匹配模式的行"></a>grep – 打印匹配模式的行</h4><p><code>grep</code> 是一个强大的程序，用于在文件中查找文本模式。它的使用方式如下：</p>
<p>当 <code>grep</code> 在文件中遇到一个“模式”时，它会打印出包含该模式的行。<code>grep</code> 可以匹配的模式可能非常复杂，但现在我们将集中关注简单的文本匹配。我们将在第19章中介绍称为 <em>正则表达式</em> 的高级模式。</p>
<p>假设我们想在程序列表中找到所有名称中包含单词“zip”的文件。这样的搜索可能会让我们了解一些与文件压缩有关的系统程序。我们会这样做：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls /bin /usr/bin | sort | uniq | grep zip</span><br><span class="line">bunzip2</span><br><span class="line">bzip2</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">unzip</span><br><span class="line">zip</span><br><span class="line">zipcloak</span><br><span class="line">zipgrep</span><br><span class="line">zipinfo</span><br><span class="line">zipnote</span><br><span class="line">zipsplit</span><br></pre></td></tr></table></figure>

<p><code>grep</code> 还有一些方便的选项：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep pattern [file...]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-i</code>，使 <code>grep</code> 在执行搜索时忽略大小写（通常搜索区分大小写）</li>
<li><code>-v</code>，告诉 <code>grep</code> 只打印不匹配模式的那些行。</li>
</ul>
<h4 id="head-tail-–-打印文件的前部分-后部分"><a href="#head-tail-–-打印文件的前部分-后部分" class="headerlink" title="head &#x2F; tail – 打印文件的前部分 &#x2F; 后部分"></a>head &#x2F; tail – 打印文件的前部分 &#x2F; 后部分</h4><p>有时我们不希望从命令中得到所有输出。我们可能只想要前几行或后几行。<code>head</code> 命令打印文件的前十行，而 <code>tail</code> 命令打印文件的最后十行。默认情况下，这两个命令都会打印十行文本，但可以使用 <code>-n</code> 选项进行调整。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ head -n 5 ls-output.txt</span><br><span class="line">total 343496</span><br><span class="line">-rwxr-xr-x 1 root root 31316 2007-12-05 08:58 [</span><br><span class="line">-rwxr-xr-x 1 root root 8240 2007-12-09 13:39 411toppm</span><br><span class="line">-rwxr-xr-x 1 root root 111276 2007-11-26 14:27 a2p</span><br><span class="line">-rwxr-xr-x 1 root root 25368 2006-10-06 20:16 a52dec</span><br><span class="line">[me@linuxbox ~]$ tail -n 5 ls-output.txt</span><br><span class="line">-rwxr-xr-x 1 root root 5234 2007-06-27 10:56 znew</span><br><span class="line">-rwxr-xr-x 1 root root 691 2005-09-10 04:21 zonetab2pot.py</span><br><span class="line">-rw-r--r-- 1 root root 930 2007-11-01 12:23 zonetab2pot.pyc</span><br><span class="line">-rw-r--r-- 1 root root 930 2007-11-01 12:23 zonetab2pot.pyo</span><br><span class="line">lrwxrwxrwx 1 root root 6 2016-01-31 05:22 zsoelim -&gt; soelim</span><br></pre></td></tr></table></figure>

<p>这些命令也可以在管道中使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls /usr/bin | tail -n 5</span><br><span class="line">znew</span><br><span class="line">zonetab2pot.py</span><br><span class="line">zonetab2pot.pyc</span><br><span class="line">zonetab2pot.pyo</span><br><span class="line">zsoelim</span><br></pre></td></tr></table></figure>

<p>tail有一个选项，允许我们实时查看文件。这对于观察正在被写入的日志文件的进度非常有用。在下面的例子中，我们将查看<code>/var/log</code>中的<code>messages</code>文件（如果<code>messages</code>不存在，则查看<code>/var/log/syslog</code>文件）。在某些Linux发行版上，执行此操作需要超级用户权限，因为<code>/var/log/messages</code>文件可能包含安全信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ tail -f /var/log/messages</span><br><span class="line">Feb 8 13:40:05 twin4 dhclient: DHCPACK from 192.168.1.1</span><br><span class="line">Feb 8 13:40:05 twin4 dhclient: bound to 192.168.1.4 -- renewal in</span><br><span class="line">1652 seconds.</span><br><span class="line">Feb 8 13:55:32 twin4 mountd[3953]: /var/NFSv4/musicbox exported to</span><br><span class="line">both 192.168.1.0/24 and twin7.localdomain in</span><br><span class="line">192.168.1.0/24,twin7.localdomain</span><br><span class="line">Feb 8 14:07:37 twin4 dhclient: DHCPREQUEST on eth0 to 192.168.1.1</span><br><span class="line">port 67</span><br><span class="line">Feb 8 14:07:37 twin4 dhclient: DHCPACK from 192.168.1.1</span><br><span class="line">Feb 8 14:07:37 twin4 dhclient: bound to 192.168.1.4 -- renewal in</span><br><span class="line">1771 seconds.</span><br><span class="line">Feb 8 14:09:56 twin4 smartd[3468]: Device: /dev/hda, SMART</span><br><span class="line">Prefailure Attribute: 8 Seek_Time_Performance changed from 237 to 236</span><br><span class="line">Feb 8 14:10:37 twin4 mountd[3953]: /var/NFSv4/musicbox exported to</span><br><span class="line">both 192.168.1.0/24 and twin7.localdomain in</span><br><span class="line">192.168.1.0/24,twin7.localdomain</span><br><span class="line">Feb 8 14:25:07 twin4 sshd(pam_unix)[29234]: session opened for user</span><br><span class="line">me by (uid=0)</span><br><span class="line">Feb 8 14:25:36 twin4 su(pam_unix)[29279]: session opened for user</span><br><span class="line">root by me(uid=500)</span><br></pre></td></tr></table></figure>

<p>使用“-f”选项，<code>tail</code>会继续监视文件，当有新行被追加时，它们会立即显示在屏幕上。这将继续进行，直到我们按下Ctrl-c。</p>
<h4 id="tee-–-从标准输入读取并将其输出到标准输出和文件"><a href="#tee-–-从标准输入读取并将其输出到标准输出和文件" class="headerlink" title="tee – 从标准输入读取并将其输出到标准输出和文件"></a>tee – 从标准输入读取并将其输出到标准输出和文件</h4><p>为了保持我们的管道隐喻，Linux提供了一个称为tee的命令，该命令在我们的管道上创建一个“tee”接头。tee程序读取标准输入并将其复制到标准输出（允许数据继续通过管道）以及一个或多个文件。这对于在处理的中间阶段捕获管道的内容非常有用。在这里，我们重复了我们早些时候的一个例子，这次包括tee以将整个目录列表捕获到文件<code>ls.txt</code>中，然后再由grep过滤管道的内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ ls /usr/bin | tee ls.txt | grep zip</span><br><span class="line">bunzip2</span><br><span class="line">bzip2</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">unzip</span><br><span class="line">zip</span><br><span class="line">zipcloak</span><br><span class="line">zipgrep</span><br><span class="line">zipinfo</span><br><span class="line">zipnote</span><br><span class="line">zipsplit</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>像往常一样，查看我们在本章中涵盖的每个命令的文档。我们只看到了它们最基本的用法。它们都有许多有趣的选项。随着我们在Linux上的经验增长，我们会发现命令行的重定向功能对解决特定问题非常有用。有许多命令使用标准输入和输出，几乎所有的命令行程序都使用标准错误来显示它们的信息性消息。</p>
<h3 id="Linux-是关于想象力的"><a href="#Linux-是关于想象力的" class="headerlink" title="Linux 是关于想象力的"></a>Linux 是关于想象力的</h3><p>当我被问及解释Windows和Linux之间的区别时，我经常使用一个玩具类比。</p>
<p>Windows就像是Game Boy。你去商店买了一个全新的、闪闪发光的盒子。你带它回家，打开它，然后玩耍。漂亮的图形，可爱的声音。然而，过了一段时间，你厌倦了它自带的游戏，于是你回到商店买了另一个。这个周期一次又一次地重复。最后，你回到商店告诉柜台后面的人，“我想要一个能做这个的游戏！”结果被告知这样的游戏不存在，因为没有“市场需求”。然后你说，“但我只需要改变这一件事！”柜台后面的人告诉你不能改变它。这些游戏都被封闭在它们的卡带中。你发现你的玩具只能玩别人决定你需要的游戏。</p>
<p>另一方面，Linux就像是世界上最大的Erector Set（铁架玩具套件）。你打开它，里面只有大量的部件。有许多钢支柱、螺丝、螺母、齿轮、滑轮、电机，还有一些建议可以建造什么。于是，你开始玩耍。你按照其中一个建议开始建造，然后又建造另一个。过了一段时间，你发现你有了自己的想法。你不需要再回到商店，因为你已经拥有了你需要的一切。这个Erector Set会按照你的想象力的形状进行变化。它会做你想要的。</p>
<p>当然，你选择的玩具是个人的事情，那么你会觉得哪个玩具更令人满意呢？</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/TLCL/" rel="tag"># TLCL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/03/5-working-with-commands/" rel="prev" title="使用命令">
                  <i class="fa fa-angle-left"></i> 使用命令
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/03/7-seeing-world-shell/" rel="next" title="从Shell的视角看世界">
                  从Shell的视角看世界 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2015 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Slagga</span>
  </div>
  <div class="powered-by">由 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9waXNjZXMv">NexT.Pisces</span> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdHNsYWdnYQ==" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/comments.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/motion.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/sidebar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/next-boot.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/pjax.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/search/local-search.min.js"></script>




  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/fancybox.min.js"></script>



  




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"gitslagga","repo":"gitslagga.github.io","client_id":"8b03c773267690e6d402","client_secret":"7b2ef82f50c632cdb14c98b7e5928357974cad97","admin_user":"gitslagga","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"c6d65930f512faf04f36a98bd63a6a9b"}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/comments/gitalk.min.js"></script>

</body>
</html>
