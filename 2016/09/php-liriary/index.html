<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="E1ct36DyjSpaeX5NMAVsyzCjDs8-dQxGThgvw2i1yg0">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"slagga.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.21.0","exturl":true,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/config.min.js"></script>

    <meta name="description" content="概述作为一个 PHP 开发者，现在是一个令人激动的时刻。每天有许许多多有用的库分发出来，在 Github 上很容易发现和使用这些库。 下面是我曾经遇到过最酷的 24 个库。你最喜欢的库没有在这个列表里面？那就在评论中分享吧！">
<meta property="og:type" content="article">
<meta property="og:title" content="Php 开发者应了解的 24 个库">
<meta property="og:url" content="https://slagga.top/2016/09/php-liriary/index.html">
<meta property="og:site_name" content="计算机那些事">
<meta property="og:description" content="概述作为一个 PHP 开发者，现在是一个令人激动的时刻。每天有许许多多有用的库分发出来，在 Github 上很容易发现和使用这些库。 下面是我曾经遇到过最酷的 24 个库。你最喜欢的库没有在这个列表里面？那就在评论中分享吧！">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2016-09-20T07:28:30.000Z">
<meta property="article:modified_time" content="2025-06-06T06:13:40.892Z">
<meta property="article:author" content="Slagga">
<meta property="article:tag" content="Blog, HTML, CSS, JavaScript, Python, PHP, Java, Go, Redis, MySQL, Node.js, React, Vuejs, Git, Programming, Web Development, Blockchain">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://slagga.top/2016/09/php-liriary/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://slagga.top/2016/09/php-liriary/","path":"2016/09/php-liriary/","title":"Php 开发者应了解的 24 个库"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Php 开发者应了解的 24 个库 | 计算机那些事</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0E2T2VNH5S"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-0E2T2VNH5S","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/analytics/google-analytics.min.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">计算机那些事</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">软件开发、定制和合作。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">229</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">78</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">28</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Dispatch-%E2%80%93-%E5%BE%AE%E6%A1%86%E6%9E%B6"><span class="nav-number">2.</span> <span class="nav-text">1. Dispatch – 微框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Klein-%E2%80%93-PHP-%E5%BF%AB%E5%A6%82%E9%97%AA%E7%94%B5%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="nav-number">3.</span> <span class="nav-text">2. Klein – PHP 快如闪电的路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Ham-%E2%80%93-%E5%B8%A6%E7%BC%93%E5%AD%98%E7%9A%84%E8%B7%AF%E7%94%B1%E5%BA%93"><span class="nav-number">4.</span> <span class="nav-text">3. Ham – 带缓存的路由库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Assetic-%E2%80%93-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">4. Assetic – 资源管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-ImageWorkshop-%E2%80%93-%E5%B8%A6%E5%B1%82%E7%9A%84%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">5. ImageWorkshop – 带层的图片处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Snappy-%E2%80%93-%E5%BF%AB%E7%85%A7-PDF-%E5%BA%93"><span class="nav-number">7.</span> <span class="nav-text">6. Snappy – 快照 &#x2F; PDF 库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Idiorm-%E2%80%93-%E8%BD%BB%E9%87%8F%E7%BA%A7-ORM-%E5%BA%93"><span class="nav-number">8.</span> <span class="nav-text">7. Idiorm – 轻量级 ORM 库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Underscore-%E2%80%93-PHP-%E7%9A%84%E5%B7%A5%E5%85%B7%E8%85%B0%E5%B8%A6"><span class="nav-number">9.</span> <span class="nav-text">8. Underscore – PHP 的工具腰带</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-Requests-%E2%80%93-%E7%AE%80%E5%8D%95-HTTP-%E8%AF%B7%E6%B1%82"><span class="nav-number">10.</span> <span class="nav-text">9. Requests – 简单 HTTP 请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-Buzz-%E2%80%93-%E7%AE%80%E5%8D%95%E7%9A%84-HTTP-%E8%AF%B7%E6%B1%82%E5%BA%93"><span class="nav-number">11.</span> <span class="nav-text">10. Buzz – 简单的 HTTP 请求库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-Goutte-%E2%80%93-Web-%E6%8A%93%E5%8F%96%E5%BA%93"><span class="nav-number">12.</span> <span class="nav-text">11. Goutte – Web 抓取库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-Carbon-%E2%80%93-DateTime-%E5%BA%93"><span class="nav-number">13.</span> <span class="nav-text">12. Carbon – DateTime 库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-Ubench-%E2%80%93-%E5%BE%AE%E5%9E%8B%E5%9F%BA%E5%87%86%E5%BA%93"><span class="nav-number">14.</span> <span class="nav-text">13. Ubench – 微型基准库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-Validation-%E2%80%93-%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E5%BC%95%E6%93%8E"><span class="nav-number">15.</span> <span class="nav-text">14. Validation – 输入验证引擎</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-Filterus-%E2%80%93-%E8%BF%87%E6%BB%A4%E5%BA%93"><span class="nav-number">16.</span> <span class="nav-text">15. Filterus – 过滤库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-Faker-%E2%80%93-%E5%81%87%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90%E5%99%A8"><span class="nav-number">17.</span> <span class="nav-text">16. Faker – 假数据生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-Mustache-php-%E2%80%93-%E4%BC%98%E9%9B%85%E6%A8%A1%E6%9D%BF%E5%BA%93"><span class="nav-number">18.</span> <span class="nav-text">17. Mustache.php – 优雅模板库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-Gaufrette-%E2%80%93-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%8A%BD%E8%B1%A1%E5%B1%82"><span class="nav-number">19.</span> <span class="nav-text">18. Gaufrette – 文件系统抽象层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-Omnipay-%E2%80%93-%E6%94%AF%E4%BB%98%E5%A4%84%E7%90%86%E5%BA%93"><span class="nav-number">20.</span> <span class="nav-text">19. Omnipay – 支付处理库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-Upload-%E2%80%93-%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">21.</span> <span class="nav-text">20. Upload – 处理文件上传</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-HTMLPurifier-%E2%80%93-HTML-XSS-%E9%98%B2%E6%8A%A4"><span class="nav-number">22.</span> <span class="nav-text">21. HTMLPurifier – HTML XSS 防护</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-ColorJizz-PHP-%E2%80%93-%E9%A2%9C%E8%89%B2%E6%93%8D%E6%8E%A7%E5%BA%93"><span class="nav-number">23.</span> <span class="nav-text">22. ColorJizz-PHP – 颜色操控库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-PHP-Geo-%E2%80%93-%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E5%AE%9A%E4%BD%8D%E5%BA%93"><span class="nav-number">24.</span> <span class="nav-text">23. PHP Geo – 地理位置定位库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-ShellWrap-%E2%80%93-%E4%BC%98%E7%BE%8E%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8C%85%E8%A3%85%E5%99%A8"><span class="nav-number">25.</span> <span class="nav-text">24. ShellWrap – 优美的命令行包装器</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Slagga"
      src="https://avatars.githubusercontent.com/u/19620432">
  <p class="site-author-name" itemprop="name">Slagga</p>
  <div class="site-description" itemprop="description">计算机那些事 - 个人博客网站，涉及的领域包括IT技术、区块链行业、产品思维、运营能力、个人观点等</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">229</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">78</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdHNsYWdnYQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gitslagga"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnNsYWdnYUBkdWNrLmNvbQ==" title="E-Mail → mailto:slagga@duck.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://slagga.top/2016/09/php-liriary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/19620432">
      <meta itemprop="name" content="Slagga">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="计算机那些事">
      <meta itemprop="description" content="计算机那些事 - 个人博客网站，涉及的领域包括IT技术、区块链行业、产品思维、运营能力、个人观点等">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Php 开发者应了解的 24 个库 | 计算机那些事">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Php 开发者应了解的 24 个库
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2016-09-20 15:28:30" itemprop="dateCreated datePublished" datetime="2016-09-20T15:28:30+08:00">2016-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-06-06 14:13:40" itemprop="dateModified" datetime="2025-06-06T14:13:40+08:00">2025-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Php/" itemprop="url" rel="index"><span itemprop="name">Php</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>作为一个 PHP 开发者，现在是一个令人激动的时刻。每天有许许多多有用的库分发出来，在 Github 上很容易发现和使用这些库。</p>
<p>下面是我曾经遇到过最酷的 24 个库。你最喜欢的库没有在这个列表里面？那就在评论中分享吧！</p>
<span id="more"></span>

<h2 id="1-Dispatch-–-微框架"><a href="#1-Dispatch-–-微框架" class="headerlink" title="1. Dispatch – 微框架"></a>1. Dispatch – 微框架</h2><p>Dispatch 是一个 PHP 小框架。它并没有给你完整的 MVC 设置，但你可以定义 URL 规则和方法，以便更好组织应用程序。</p>
<p>这对 API、简单的站点或原型来说是完美的。</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//包含库</span></span><br><span class="line">include <span class="string">&#x27;dispatch.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义你的路由</span></span><br><span class="line"><span class="keyword">get</span>(<span class="string">&#x27;/greet&#x27;</span>, <span class="title function_"><span class="keyword">function</span> </span>() &#123;</span><br><span class="line">　　<span class="comment">//渲染视图</span></span><br><span class="line">    render(<span class="string">&#x27;greet-form&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//post处理</span></span><br><span class="line">post(<span class="string">&#x27;/greet&#x27;</span>, <span class="title function_"><span class="keyword">function</span> </span>() &#123;</span><br><span class="line">    <span class="variable">$name</span> = from(<span class="variable">$_POST</span>, <span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">　　<span class="comment">// render a view while passing some locals</span></span><br><span class="line">    render(<span class="string">&#x27;greet-show&#x27;</span>, array(<span class="string">&#x27;name&#x27;</span> =&gt; <span class="variable">$name</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// serve your site</span></span><br><span class="line">dispatch();</span><br></pre></td></tr></table></figure>

<p>你可以匹配特定类型的 HTTP 请求和路径，渲染视图或做更多事情。如果你合并 Dispatch 和其他框架，那你就可以拥有一个相当强大并且轻量级的程序！</p>
<h2 id="2-Klein-–-PHP-快如闪电的路由"><a href="#2-Klein-–-PHP-快如闪电的路由" class="headerlink" title="2. Klein – PHP 快如闪电的路由"></a>2. Klein – PHP 快如闪电的路由</h2><p>Klein 是另一款针对 PHP5.3 + 版本的轻量级路由库。虽然它有一些比 Dispatch 冗长的语法，但它相当快。这有一个例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">respond(<span class="string">&#x27;/[:name]&#x27;</span>, <span class="keyword">function</span> (<span class="variable">$request</span>) &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;Hello &#x27;</span> . <span class="variable">$request</span>-&gt;name;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>你也可以定制来指定 HTTP 方法和使用正则表达式作为路径</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">respond(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/posts&#x27;</span>, <span class="symbol">$call</span><span class="built_in">back</span>);</span><br><span class="line">respond(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;/posts/create&#x27;</span>, <span class="symbol">$call</span><span class="built_in">back</span>);</span><br><span class="line">respond(<span class="string">&#x27;PUT&#x27;</span>, <span class="string">&#x27;/posts/[i:id]&#x27;</span>, <span class="symbol">$call</span><span class="built_in">back</span>);</span><br><span class="line">respond(<span class="string">&#x27;DELETE&#x27;</span>, <span class="string">&#x27;/posts/[i:id]&#x27;</span>, <span class="symbol">$call</span><span class="built_in">back</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配多种请求方法:</span></span><br><span class="line">respond(<span class="built_in">array</span>(<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;GET&#x27;</span>), <span class="symbol">$route</span>, <span class="symbol">$call</span><span class="built_in">back</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//你或许也想在相同的地方处理请求</span></span><br><span class="line">respond(<span class="string">&#x27;/posts/[create|edit:action] /[i:id] &#x27;</span>, <span class="keyword">function</span> (<span class="params">$request, $response</span>) &#123;</span><br><span class="line">    switch (<span class="symbol">$re</span>quest-&gt;action) &#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>对于小型项目来说这是很棒的，但当你把一个像这样的库用于大型应用时，你不得不遵守规矩，因为你的代码可能很快就变得不可维护。</p>
<p>所以你最好搭配一个像 Laravel 或者 CodeIgniter 这样完全成熟的框架。</p>
<h2 id="3-Ham-–-带缓存的路由库"><a href="#3-Ham-–-带缓存的路由库" class="headerlink" title="3. Ham – 带缓存的路由库"></a>3. Ham – 带缓存的路由库</h2><p>Ham 也是一款轻量级的路由框架，但是它利用缓存甚至获得了更快的速度。</p>
<p>它通过把任何 I&#x2F;O 相关的东西缓存进 XCache&#x2F;APC。下面是一个例子：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;../ham/ham.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span> = <span class="keyword">new</span> <span class="title class_">Ham</span>(<span class="string">&#x27;example&#x27;</span>);</span><br><span class="line"><span class="variable">$app</span>-&gt;<span class="title function_ invoke__">config_from_file</span>(<span class="string">&#x27;settings.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span>-&gt;<span class="title function_ invoke__">route</span>(<span class="string">&#x27;/pork&#x27;</span>, function(<span class="variable">$app</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Delicious pork.&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable">$hello</span> = <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$app</span>, <span class="variable">$name</span>=<span class="string">&#x27;world&#x27;</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$app</span>-&gt;<span class="title function_ invoke__">render</span>(<span class="string">&#x27;hello.html&#x27;</span>, <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span> =&gt; <span class="variable">$name</span></span><br><span class="line">    ));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable">$app</span>-&gt;<span class="title function_ invoke__">route</span>(<span class="string">&#x27;/hello/&lt;string&gt;&#x27;</span>, <span class="variable">$hello</span>);</span><br><span class="line"><span class="variable">$app</span>-&gt;<span class="title function_ invoke__">route</span>(<span class="string">&#x27;/&#x27;</span>, <span class="variable">$hello</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span>-&gt;<span class="title function_ invoke__">run</span>();</span><br></pre></td></tr></table></figure>

<p>这个库要求你至少安装了 XCache 和 APC 其中的一个，这可能意味着，在大多数主机提供商提供的主机上它可能用不了。</p>
<p>但是如果你拥有一个安装它们其一的主机，或者你可以操控你的 web 服务器，你应该尝试这款最快的框架。</p>
<h2 id="4-Assetic-–-资源管理"><a href="#4-Assetic-–-资源管理" class="headerlink" title="4. Assetic – 资源管理"></a>4. Assetic – 资源管理</h2><p>Assetic 是一个 PHP 的资源管理框架，用于合并和减小了 CSS&#x2F;JS 资源。下面是例子。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Assetic</span>\<span class="title">Asset</span>\<span class="title">AssetCollection</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Assetic</span>\<span class="title">Asset</span>\<span class="title">FileAsset</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Assetic</span>\<span class="title">Asset</span>\<span class="title">GlobAsset</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$js</span> = <span class="keyword">new</span> <span class="title class_">AssetCollection</span>(<span class="keyword">array</span>(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">GlobAsset</span>(<span class="string">&#x27;/path/to/js/*&#x27;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">FileAsset</span>(<span class="string">&#x27;/path/to/another.js&#x27;</span>),</span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="comment">//当资源被输出时，代码会被合并</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$js</span>-&gt;<span class="title function_ invoke__">dump</span>();</span><br></pre></td></tr></table></figure>

<p>以这种方式合并资源是一个好主意，因为它可以加速站点。不仅仅总下载量减小了，也消除了大量不必要的 HTTP 请求 (这是最影响页面加载时间的两件事)</p>
<h2 id="5-ImageWorkshop-–-带层的图片处理"><a href="#5-ImageWorkshop-–-带层的图片处理" class="headerlink" title="5. ImageWorkshop – 带层的图片处理"></a>5. ImageWorkshop – 带层的图片处理</h2><p>ImageWorkshop 是一个让你操控带层图片的开源库。</p>
<p>借助它你可以重定义尺寸、裁剪、制作缩略图、打水印或做更多事情。下面是一个例子：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 从norway.jpg图片初始化norway层</span><br><span class="line"><span class="variable">$norwayLayer</span> = ImageWorkshop::initFromPath(<span class="string">&#x27;/path/to/images/norway.jpg&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 从watermark.png图片初始化watermark层(水印层)</span><br><span class="line"><span class="variable">$watermarkLayer</span> = ImageWorkshop::initFromPath(<span class="string">&#x27;/path/to/images/watermark.png&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="variable">$image</span> = <span class="variable">$norwayLayer</span>-&gt;getResult(); <span class="regexp">//</span> 这是生成的图片!</span><br><span class="line"></span><br><span class="line">header(<span class="string">&#x27;Content-type: image/jpeg&#x27;</span>);</span><br><span class="line">imagejpeg(<span class="variable">$image</span>, null, <span class="number">95</span>); <span class="regexp">//</span> We choose to show a JPG with a quality of <span class="number">95</span>%</span><br><span class="line"><span class="keyword">exit</span>;</span><br></pre></td></tr></table></figure>

<p>ImageWorkshop 被开发用于使一些 PHP 中最通用的处理图片的案例简化，如果你需要一些更强大的东西，你应该看下 Imagine library！</p>
<h2 id="6-Snappy-–-快照-PDF-库"><a href="#6-Snappy-–-快照-PDF-库" class="headerlink" title="6. Snappy – 快照 &#x2F; PDF 库"></a>6. Snappy – 快照 &#x2F; PDF 库</h2><p>Snappy 是一个 PHP5 库，可以生成快照、URL、HTML、PDF。</p>
<p>它依赖于 wkhtmltopdf binary（在 Linux，Windows 和 OSX 上都可用）。你可以像这样使用它们：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;/path/to/snappy/src/autoload.php&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Knp</span>\<span class="title">Snappy</span>\<span class="title">Pdf</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">//通过wkhtmltopdf binary路径初始化库</span></span><br><span class="line"><span class="variable">$snappy</span> = <span class="keyword">new</span> <span class="title class_">Pdf</span>(<span class="string">&#x27;/usr/local/bin/wkhtmltopdf&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//通过把Content-type头设置为pdf来在浏览器中展示pdf</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: application/pdf&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Disposition: attachment; filename=&quot;file.pdf&quot;&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$snappy</span>-&gt;<span class="title function_ invoke__">getOutput</span>(<span class="string">&#x27;http://www.github.com&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>要记得，你的主机提供商可能不允许调用外部二进制程序。 </p>
<h2 id="7-Idiorm-–-轻量级-ORM-库"><a href="#7-Idiorm-–-轻量级-ORM-库" class="headerlink" title="7. Idiorm – 轻量级 ORM 库"></a>7. Idiorm – 轻量级 ORM 库</h2><p>Idiorm 是个人之前在本网站教程中用过最喜爱的一款。</p>
<p>它是一款轻量级的 ORM 库，一个建立在 PDO 之上的 PHP5 查询构造器。借助它，你可以忘记如何书写乏味的 SQL</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$user = ORM::for_table<span class="function"><span class="params">(<span class="string">&#x27;user&#x27;</span>)</span></span></span><br><span class="line"><span class="function">    -&gt;</span>where_equal<span class="function"><span class="params">(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;j4mie&#x27;</span>)</span></span></span><br><span class="line"><span class="function">    -&gt;</span>find_one();</span><br><span class="line"></span><br><span class="line">$user-&gt;first_name = <span class="string">&#x27;Jamie&#x27;</span>;</span><br><span class="line">$user-&gt;save();</span><br><span class="line"></span><br><span class="line">$tweets = ORM::for_table<span class="function"><span class="params">(<span class="string">&#x27;tweet&#x27;</span>)</span></span></span><br><span class="line"><span class="function">    -&gt;</span>select<span class="function"><span class="params">(<span class="string">&#x27;tweet.*&#x27;</span>)</span></span></span><br><span class="line"><span class="function">    -&gt;</span>join(<span class="string">&#x27;user&#x27;</span>, array(</span><br><span class="line">        <span class="string">&#x27;user.id&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;tweet.user_id&#x27;</span></span><br><span class="line">    ))</span><br><span class="line">    -&gt;where_equal<span class="function"><span class="params">(<span class="string">&#x27;user.username&#x27;</span>, <span class="string">&#x27;j4mie&#x27;</span>)</span></span></span><br><span class="line"><span class="function">    -&gt;</span>find_many();</span><br><span class="line"></span><br><span class="line">foreach ($tweets <span class="keyword">as</span> $tweet) &#123;</span><br><span class="line">    echo $tweet-&gt;text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Idiorm 有一个姊妹库叫 Paris，Paris 是一个基于 Idiorm 的 Active Record 实现。 </p>
<h2 id="8-Underscore-–-PHP-的工具腰带"><a href="#8-Underscore-–-PHP-的工具腰带" class="headerlink" title="8. Underscore – PHP 的工具腰带"></a>8. Underscore – PHP 的工具腰带</h2><p>Underscore 是原始 Underscore.js 的一个接口 – Javascript 应用的工具腰带。</p>
<p>PHP 版本没有让人失望，而且支持了几乎所有原生功能。下面是一些例子</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">__::<span class="title function_ invoke__">each</span>(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$num</span></span>) </span>&#123; <span class="keyword">echo</span> <span class="variable">$num</span> . <span class="string">&#x27;,&#x27;</span>; &#125;); <span class="comment">// 1,2,3,</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$multiplier</span> = <span class="number">2</span>;</span><br><span class="line">__::<span class="title function_ invoke__">each</span>(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$num</span>, <span class="variable">$index</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$multiplier</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$index</span> . <span class="string">&#x27;=&#x27;</span> . (<span class="variable">$num</span> * <span class="variable">$multiplier</span>) . <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// prints: 0=2,1=4,2=6,</span></span><br><span class="line"></span><br><span class="line">__::<span class="title function_ invoke__">reduce</span>(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$memo</span>, <span class="variable">$num</span></span>) </span>&#123; <span class="keyword">return</span> <span class="variable">$memo</span> + <span class="variable">$num</span>; &#125;, <span class="number">0</span>); <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line">__::<span class="title function_ invoke__">find</span>(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$num</span></span>) </span>&#123; <span class="keyword">return</span> <span class="variable">$num</span> % <span class="number">2</span> === <span class="number">0</span>; &#125;); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">__::<span class="title function_ invoke__">filter</span>(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$num</span></span>) </span>&#123; <span class="keyword">return</span> <span class="variable">$num</span> % <span class="number">2</span> === <span class="number">0</span>; &#125;); <span class="comment">// array(2, 4)</span></span><br></pre></td></tr></table></figure>

<p>这个库也支持链式语法，这使得它更为强大</p>
<h2 id="9-Requests-–-简单-HTTP-请求"><a href="#9-Requests-–-简单-HTTP-请求" class="headerlink" title="9. Requests – 简单 HTTP 请求"></a>9. Requests – 简单 HTTP 请求</h2><p>Requests 是一个简化 HTTP 请求的库。</p>
<p>如果你和我一样，几乎从来都记不住传递给 Curl 的各种各样的参数，那么它就是为你准备的：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$headers</span> = <span class="keyword">array</span>(<span class="string">&#x27;Accept&#x27;</span> =&gt; <span class="string">&#x27;application/json&#x27;</span>);</span><br><span class="line"><span class="variable">$options</span> = <span class="keyword">array</span>(<span class="string">&#x27;auth&#x27;</span> =&gt; <span class="keyword">array</span>(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;pass&#x27;</span>));</span><br><span class="line"><span class="variable">$request</span> = <span class="title class_">Requests</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;https://api.github.com/gists&#x27;</span>, <span class="variable">$headers</span>, <span class="variable">$options</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$request</span>-&gt;status_code);</span><br><span class="line"><span class="comment">// int(200)</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$request</span>-&gt;headers[<span class="string">&#x27;content-type&#x27;</span>]);</span><br><span class="line"><span class="comment">// string(31) &quot;application/json; charset=utf-8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$request</span>-&gt;body);</span><br><span class="line"><span class="comment">// string(26891) &quot;[…]&quot;</span></span><br></pre></td></tr></table></figure>

<p>借助这个库，你可以发送 HEAD、GET、POST、PUT、DELTE 和 PATCH HTTP 请求，你可以通过数组添加文件和参数，并且可以访问所有相应数据。</p>
<h2 id="10-Buzz-–-简单的-HTTP-请求库"><a href="#10-Buzz-–-简单的-HTTP-请求库" class="headerlink" title="10. Buzz – 简单的 HTTP 请求库"></a>10. Buzz – 简单的 HTTP 请求库</h2><p>Buzz 是另一个完成 HTTP 请求的库。下面是一个例子</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$request</span> = <span class="keyword">new</span> <span class="type">Buzz</span>\Message\Request(<span class="string">&#x27;HEAD&#x27;</span>, <span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;http://google.com&#x27;</span>);</span><br><span class="line"><span class="variable">$response</span> = <span class="keyword">new</span> <span class="type">Buzz</span>\Message\Response();</span><br><span class="line"></span><br><span class="line"><span class="variable">$client</span> = <span class="keyword">new</span> <span class="type">Buzz</span>\Client\FileGetContents();</span><br><span class="line"><span class="variable">$client</span>-&gt;send(<span class="variable">$request</span>, <span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line">echo <span class="variable">$request</span>;</span><br><span class="line">echo <span class="variable">$response</span></span><br></pre></td></tr></table></figure>

<p>因为它缺乏文档，所以你不得不阅读源码来获知它支持的所有参数。</p>
<h2 id="11-Goutte-–-Web-抓取库"><a href="#11-Goutte-–-Web-抓取库" class="headerlink" title="11. Goutte – Web 抓取库"></a>11. Goutte – Web 抓取库</h2><p>Goutte 是一个抓取网站和提取数据的库。它提供了一个优雅的 API，这使得从远程页面上选择特定元素变得简单。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;/path/to/goutte.phar&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Goutte</span>\<span class="title">Client</span>; </span><br><span class="line"></span><br><span class="line"><span class="variable">$client</span> = <span class="keyword">new</span> <span class="title class_">Client</span>();</span><br><span class="line"><span class="variable">$crawler</span> = <span class="variable">$client</span>-&gt;<span class="title function_ invoke__">request</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.symfony-project.org/&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//点击链接</span></span><br><span class="line"><span class="variable">$link</span> = <span class="variable">$crawler</span>-&gt;<span class="title function_ invoke__">selectLink</span>(<span class="string">&#x27;Plugins&#x27;</span>)-&gt;<span class="title function_ invoke__">link</span>();</span><br><span class="line"><span class="variable">$crawler</span> = <span class="variable">$client</span>-&gt;<span class="title function_ invoke__">click</span>(<span class="variable">$link</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//使用一个类CSS语法提取数据</span></span><br><span class="line"><span class="variable">$t</span> = <span class="variable">$crawler</span>-&gt;<span class="title function_ invoke__">filter</span>(<span class="string">&#x27;#data&#x27;</span>)-&gt;<span class="title function_ invoke__">text</span>(); </span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Here is the text: <span class="subst">$t</span>&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="12-Carbon-–-DateTime-库"><a href="#12-Carbon-–-DateTime-库" class="headerlink" title="12. Carbon – DateTime 库"></a>12. Carbon – DateTime 库</h2><p>Carbon 是 DateTime API 的一个简单扩展。</p>
<figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">printf(<span class="string">&quot;Right now is %s&quot;</span>, Carbon::now()-&gt;toDateTimeString());</span><br><span class="line">printf(<span class="string">&quot;Right now in Vancouver is %s&quot;</span>, Carbon::now(<span class="string">&#x27;America/Vancouver&#x27;</span>));</span><br><span class="line"></span><br><span class="line">$tomorrow = Carbon::now()-&gt;addDay();</span><br><span class="line">$lastWeek = Carbon::now()-&gt;subWeek();</span><br><span class="line">$nextSummerOlympics = Carbon::createFromDate(<span class="number">2012</span>)-&gt;addYears(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">$officialDate = Carbon::now()-&gt;toRFC2822String();</span><br><span class="line"></span><br><span class="line">$howOldAmI = Carbon::createFromDate(<span class="number">1975</span>, <span class="number">5</span>, <span class="number">21</span>)-&gt;age;</span><br><span class="line"></span><br><span class="line">$noonTodayLondonTime = Carbon::createFromTime(<span class="number">12</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;Europe/London&#x27;</span>);</span><br><span class="line"></span><br><span class="line">$endOfWorld = Carbon::createFromDate(<span class="number">2012</span>, <span class="number">12</span>, <span class="number">21</span>, <span class="string">&#x27;GMT&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//总是以UTC对比</span></span><br><span class="line"><span class="keyword">if</span> (Carbon::now()-&gt;gte($endOfWorld)) &#123;</span><br><span class="line">    die();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Carbon::now()-&gt;isWeekend()) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Party!&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> Carbon::now()-&gt;subMinutes(<span class="number">2</span>)-&gt;diffForHumans(); <span class="comment">// &#x27;2分钟之前&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="13-Ubench-–-微型基准库"><a href="#13-Ubench-–-微型基准库" class="headerlink" title="13. Ubench – 微型基准库"></a>13. Ubench – 微型基准库</h2><p>Ubench 是一个用于评测 PHP 代码的微型库，可监控（代码）执行时间和内存使用率。下面是范例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Ubench</span>\<span class="title">Ubench</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bench</span> = <span class="keyword">new</span> <span class="title class_">Ubench</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行一些代码</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">end</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取执行消耗时间和内存</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">getTime</span>(); <span class="comment">// 156ms or 1.123s</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">getTime</span>(<span class="literal">true</span>); <span class="comment">// elapsed microtime in float</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">getTime</span>(<span class="literal">false</span>, <span class="string">&#x27;%d%s&#x27;</span>); <span class="comment">// 156ms or 1s</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">getMemoryPeak</span>(); <span class="comment">// 152B or 90.00Kb or 15.23Mb</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">getMemoryPeak</span>(<span class="literal">true</span>); <span class="comment">// memory peak in bytes 内存峰值</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">getMemoryPeak</span>(<span class="literal">false</span>, <span class="string">&#x27;%.3f%s&#x27;</span>); <span class="comment">// 152B or 90.152Kb or 15.234Mb</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在结束标识处返回内存使用情况</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$bench</span>-&gt;<span class="title function_ invoke__">getMemoryUsage</span>(); <span class="comment">// 152B or 90.00Kb or 15.23Mb</span></span><br></pre></td></tr></table></figure>

<p>(仅) 在开发时运行这些校验是一个好主意。</p>
<h2 id="14-Validation-–-输入验证引擎"><a href="#14-Validation-–-输入验证引擎" class="headerlink" title="14. Validation – 输入验证引擎"></a>14. Validation – 输入验证引擎</h2><p>Validation 声称是 PHP 库里最强大的验证引擎。但是，它能名副其实吗？看下面：</p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">use Respect\Validation\Validator <span class="keyword">as</span> v; </span><br><span class="line"></span><br><span class="line"><span class="comment">//简单验证</span></span><br><span class="line">$number = <span class="number">123</span>;</span><br><span class="line"><span class="function"><span class="title">v</span>::numeric()-&gt;</span>validate($number); <span class="comment">//true </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//链式验证</span></span><br><span class="line">$<span class="function"><span class="title">usernameValidator</span> = v::alnum()-&gt;</span><span class="function"><span class="title">noWhitespace</span>()-&gt;</span>length(<span class="number">1</span>,<span class="number">15</span>);</span><br><span class="line">$<span class="function"><span class="title">usernameValidator</span>-&gt;</span>validate(<span class="string">&#x27;alganet&#x27;</span>); <span class="comment">//true </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//验证对象属性</span></span><br><span class="line">$user = new stdClass;</span><br><span class="line">$<span class="function"><span class="title">user</span>-&gt;</span><span class="keyword">name</span> = <span class="string">&#x27;Alexandre&#x27;</span>;</span><br><span class="line">$<span class="function"><span class="title">user</span>-&gt;</span>birthdate = <span class="string">&#x27;1987-07-01&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">//在一个简单链中验证他的属性</span></span><br><span class="line">$<span class="function"><span class="title">userValidator</span> = v::attribute(&#x27;<span class="keyword">name</span>&#x27;, v::string()-&gt;</span>length(<span class="number">1</span>,<span class="number">32</span>))</span><br><span class="line">                  -&gt;<span class="function"><span class="title">attribute</span>(&#x27;birthdate&#x27;, v::date()-&gt;</span>minimumAge(<span class="number">18</span>)); </span><br><span class="line"></span><br><span class="line">$<span class="function"><span class="title">userValidator</span>-&gt;</span>validate($user); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>你可以通过这个库验证你的表单或其他用户提交的数据。除此之外，它内置了很多校验，抛出异常和定制错误信息。</p>
<h2 id="15-Filterus-–-过滤库"><a href="#15-Filterus-–-过滤库" class="headerlink" title="15. Filterus – 过滤库"></a>15. Filterus – 过滤库</h2><p>Filterus 是另一个过滤库，但它不仅仅可以验证，也可以过滤匹配预设模式的输出。下面是一个例子：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$f</span> = <span class="title class_">Filter</span><span class="symbol">:</span><span class="symbol">:factory</span>(<span class="string">&#x27;string,max:5&#x27;</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="string">&#x27;This is a test string&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="variable">$f</span>-&gt;validate(<span class="variable">$str</span>); <span class="regexp">//</span> <span class="literal">false</span></span><br><span class="line"><span class="variable">$f</span>-&gt;filter(<span class="variable">$str</span>); <span class="regexp">//</span> <span class="string">&#x27;This &#x27;</span></span><br></pre></td></tr></table></figure>

<p>Filterus 有很多内建模式，支持链式用法，甚至可以用独立的验证规则去验证数组元素。</p>
<h2 id="16-Faker-–-假数据生成器"><a href="#16-Faker-–-假数据生成器" class="headerlink" title="16. Faker – 假数据生成器"></a>16. Faker – 假数据生成器</h2><p>Faker 是一个为你生成假数据的 PHP 库。</p>
<p>当你需要填充一个测试数据库，或为你的 web 应用生成测试数据时，它能派上用场。它也非常容易使用：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用Faker 自动加载器</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;/path/to/Faker/src/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用工厂创建来创建一个Faker\Generator实例</span></span><br><span class="line"><span class="variable">$faker</span> = <span class="title class_">Faker\Factory</span>::<span class="title function_ invoke__">create</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过访问属性生成假数据</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$faker</span>-&gt;name; <span class="comment">// &#x27;Lucy Cechtelar&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$faker</span>-&gt;address;</span><br><span class="line">  <span class="comment">// &quot;426 Jordy Lodge</span></span><br><span class="line">  <span class="comment">// Cartwrightshire, SC 88120-6700&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$faker</span>-&gt;text;</span><br><span class="line">  <span class="comment">// Sint velit eveniet. Rerum atque repellat voluptatem quia ...</span></span><br></pre></td></tr></table></figure>

<p>只要你继续访问对象属性，它将继续返回随机生成的数据。 </p>
<h2 id="17-Mustache-php-–-优雅模板库"><a href="#17-Mustache-php-–-优雅模板库" class="headerlink" title="17. Mustache.php – 优雅模板库"></a>17. Mustache.php – 优雅模板库</h2><p>Mustache 是一款流行的模板语言，实际已经在各种编程语言中得到实现。使用它，你可以在客户端或服务段重用模板。 </p>
<p>正如你猜得那样，Mustache.php 是使用 PHP 实现的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$m</span> = <span class="keyword">new</span> <span class="title class_">Mustache_Engine</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$m</span>-&gt;<span class="title function_ invoke__">render</span>(<span class="string">&#x27;Hello &#123;&#123;planet&#125;&#125;&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;planet&#x27;</span> =&gt; <span class="string">&#x27;World!&#x27;</span>)); <span class="comment">// &quot;Hello World!&quot;</span></span><br></pre></td></tr></table></figure>

<p>建议看一下官方网站 Mustache docs 查看更多高级的例子。 </p>
<h2 id="18-Gaufrette-–-文件系统抽象层"><a href="#18-Gaufrette-–-文件系统抽象层" class="headerlink" title="18. Gaufrette – 文件系统抽象层"></a>18. Gaufrette – 文件系统抽象层</h2><p>Gaufrette 是一个 PHP5 库，提供了一个文件系统的抽象层。它使得以相同方式操控本地文件，FTP 服务器，亚马逊 S3 或更多操作变为可能。</p>
<p>它允许你开发程序时，不用了解未来你将怎么访问你的文件</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> Gaufrette\Filesystem;</span><br><span class="line"><span class="keyword">use</span> Gaufrette\Adapter\Ftp as FtpAdapter;</span><br><span class="line"><span class="keyword">use</span> Gaufrette\Adapter\Local as LocalAdapter; </span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>本地文件:</span><br><span class="line">$adapter = new LocalAdapter(<span class="string">&#x27;/var/media&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>可选地使用一个FTP适配器</span><br><span class="line">// $ftp = new FtpAdapter($path, $host, $username, $password, $port); </span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>初始化文件系统</span><br><span class="line">$filesystem = new Filesystem($adapter); </span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>使用它</span><br><span class="line">$content = $filesystem-&gt;<span class="keyword">read</span>(<span class="string">&#x27;myFile&#x27;</span>);</span><br><span class="line">$content = <span class="string">&#x27;Hello I am the new content&#x27;</span>;</span><br><span class="line">$filesystem-&gt;<span class="keyword">write</span>(<span class="string">&#x27;myFile&#x27;</span>, $content);</span><br></pre></td></tr></table></figure>

<p>也有缓存和内存适配器，并且随后将会增加更多适配器。</p>
<h2 id="19-Omnipay-–-支付处理库"><a href="#19-Omnipay-–-支付处理库" class="headerlink" title="19. Omnipay – 支付处理库"></a>19. Omnipay – 支付处理库</h2><p>Omnipay 是一个 PHP 支付处理库。它有一个清晰一致的 API，并且支持数十个网关。</p>
<p>使用这个库，你仅仅需要学习一个 API 和处理各种各样的支付处理器。下面是一个例子：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">use Omnipay\CreditCard;</span><br><span class="line">use Omnipay\GatewayFactory;</span><br><span class="line"></span><br><span class="line"><span class="variable">$gateway</span> = GatewayFactory::create(<span class="string">&#x27;Stripe&#x27;</span>);</span><br><span class="line"><span class="variable">$gateway</span>-&gt;setApiKey(<span class="string">&#x27;abc123&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$formData</span> = [<span class="string">&#x27;number&#x27;</span> =&gt; <span class="string">&#x27;4111111111111111&#x27;</span>, <span class="string">&#x27;expiryMonth&#x27;</span> =&gt; <span class="number">6</span>, <span class="string">&#x27;expiryYear&#x27;</span> =&gt; <span class="number">2016</span>];</span><br><span class="line"><span class="variable">$response</span> = <span class="variable">$gateway</span>-&gt;purchase([<span class="string">&#x27;amount&#x27;</span> =&gt; <span class="number">1000</span>, <span class="string">&#x27;card&#x27;</span> =&gt; <span class="variable">$formData</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$response</span>-&gt;isSuccessful()) &#123;</span><br><span class="line">　　<span class="regexp">//</span>支付成功:更新数据库</span><br><span class="line">    print_r(<span class="variable">$response</span>);</span><br><span class="line">&#125; elseif (<span class="variable">$response</span>-&gt;isRedirect()) &#123;</span><br><span class="line">　　<span class="regexp">//</span>跳转到异地支付网关</span><br><span class="line">    <span class="variable">$response</span>-&gt;redirect();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">　　<span class="regexp">//</span>支付失败:向客户显示信息</span><br><span class="line">    <span class="keyword">exit</span>(<span class="variable">$response</span>-&gt;getMessage());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用相同一致的 API，可以很容易地支持多种支付处理器，或在需要时进行切换。 </p>
<h2 id="20-Upload-–-处理文件上传"><a href="#20-Upload-–-处理文件上传" class="headerlink" title="20. Upload – 处理文件上传"></a>20. Upload – 处理文件上传</h2><p>Upload 是一个简化文件上传和验证的库。上传表单时，这个库会校验文件类型和尺寸。</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$storage</span> = <span class="keyword">new</span> <span class="type"></span>\Upload\Storage\FileSystem(<span class="string">&#x27;/path/to/directory&#x27;</span>);</span><br><span class="line"><span class="variable">$file</span> = <span class="keyword">new</span> <span class="type"></span>\Upload\File(<span class="string">&#x27;foo&#x27;</span>, <span class="variable">$storage</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//验证文件上传</span></span><br><span class="line"><span class="variable">$file</span>-&gt;addValidations(array(</span><br><span class="line">　　<span class="comment">//确保文件类型是&quot;image/png&quot;</span></span><br><span class="line">    <span class="keyword">new</span> <span class="type"></span>\Upload\Validation\Mimetype(<span class="string">&#x27;image/png&#x27;</span>),</span><br><span class="line"></span><br><span class="line">　　<span class="comment">//确保文件不超过5M(使用&quot;B&quot;,&quot;K&quot;,&quot;M&quot;或者&quot;G&quot;)</span></span><br><span class="line">    <span class="keyword">new</span> <span class="type"></span>\Upload\Validation\Size(<span class="string">&#x27;5M&#x27;</span>)</span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="comment">//试图上传文件</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//成功</span></span><br><span class="line">    <span class="variable">$file</span>-&gt;upload();</span><br><span class="line">&#125; <span class="keyword">catch</span> (\Exception <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="comment">//失败!</span></span><br><span class="line">    <span class="variable">$errors</span> = <span class="variable">$file</span>-&gt;getErrors();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>它将减少不少乏味的代码。</p>
<h2 id="21-HTMLPurifier-–-HTML-XSS-防护"><a href="#21-HTMLPurifier-–-HTML-XSS-防护" class="headerlink" title="21. HTMLPurifier – HTML XSS 防护"></a>21. HTMLPurifier – HTML XSS 防护</h2><p>HTMLPurifier 是一个 HTML 过滤库，通过强大的白名单和聚集分析，保护你代码远离 XSS 攻击。</p>
<p>它也确保输出标记符合标准。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;/path/to/HTMLPurifier.auto.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$config</span> = <span class="title class_">HTMLPurifier_Config</span>::<span class="title function_ invoke__">createDefault</span>();</span><br><span class="line"><span class="variable">$purifier</span> = <span class="keyword">new</span> <span class="title class_">HTMLPurifier</span>(<span class="variable">$config</span>);</span><br><span class="line"><span class="variable">$clean_html</span> = <span class="variable">$purifier</span>-&gt;<span class="title function_ invoke__">purify</span>(<span class="variable">$dirty_html</span>);</span><br></pre></td></tr></table></figure>

<h2 id="22-ColorJizz-PHP-–-颜色操控库"><a href="#22-ColorJizz-PHP-–-颜色操控库" class="headerlink" title="22. ColorJizz-PHP – 颜色操控库"></a>22. ColorJizz-PHP – 颜色操控库</h2><p>ColorJizz 是一个简单的库，借助它你可以转换不同的颜色格式，并且做简单的颜色运算</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">MischiefCollective</span>\<span class="title">ColorJizz</span>\<span class="title">Formats</span>\<span class="title">Hex</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$red_hex</span> = <span class="keyword">new</span> <span class="title class_">Hex</span>(<span class="number">0xFF0000</span>);</span><br><span class="line"><span class="variable">$red_cmyk</span> = <span class="variable">$hex</span>-&gt;<span class="title function_ invoke__">toCMYK</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$red_cmyk</span>; <span class="comment">// 0,1,1,0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">Hex</span>::<span class="title function_ invoke__">fromString</span>(<span class="string">&#x27;red&#x27;</span>)-&gt;<span class="title function_ invoke__">hue</span>(-<span class="number">20</span>)-&gt;<span class="title function_ invoke__">greyscale</span>(); <span class="comment">// 555555</span></span><br></pre></td></tr></table></figure>

<p>它已经支持并且可以操控所有主流颜色格式了</p>
<h2 id="23-PHP-Geo-–-地理位置定位库"><a href="#23-PHP-Geo-–-地理位置定位库" class="headerlink" title="23. PHP Geo – 地理位置定位库"></a>23. PHP Geo – 地理位置定位库</h2><p>phpgeo 是一个简单的库，用于计算地理坐标之间高精度距离。例如：</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">use Location\Coordinate;</span><br><span class="line">use Location\Distance\Vincenty;</span><br><span class="line"></span><br><span class="line"><span class="variable">$coordinate1</span> = <span class="keyword">new</span> <span class="type">Coordinate</span>(<span class="number">19.820664</span>, <span class="number">-155.468066</span>); <span class="comment">// Mauna Kea Summit 茂纳凯亚峰</span></span><br><span class="line"><span class="variable">$coordinate2</span> = <span class="keyword">new</span> <span class="type">Coordinate</span>(<span class="number">20.709722</span>, <span class="number">-156.253333</span>); <span class="comment">// Haleakala Summit</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$calculator</span> = <span class="keyword">new</span> <span class="type">Vincenty</span>();</span><br><span class="line"><span class="variable">$distance</span> = <span class="variable">$calculator</span>-&gt;getDistance(<span class="variable">$coordinate1</span>, <span class="variable">$coordinate2</span>); <span class="comment">// returns 128130.850 (meters; ≈128 kilometers)</span></span><br></pre></td></tr></table></figure>

<h2 id="24-ShellWrap-–-优美的命令行包装器"><a href="#24-ShellWrap-–-优美的命令行包装器" class="headerlink" title="24. ShellWrap – 优美的命令行包装器"></a>24. ShellWrap – 优美的命令行包装器</h2><p>借助 ShellWrap 库，你可以在 PHP 代码里使用强大的 Linux&#x2F;Unix 命令行工具。</p>
<figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;ShellWrap.php&#x27;</span>;</span><br><span class="line"><span class="keyword">use</span> \<span class="title">MrRio</span>\<span class="title">ShellWrap</span> <span class="title">as</span> <span class="title">sh</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">//列出当前文件下的所有文件</span></span><br><span class="line"><span class="keyword">echo</span> sh::ls(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//检出一个git分支</span></span><br><span class="line">sh::git(<span class="string">&#x27;checkout&#x27;</span>, <span class="string">&#x27;master&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//你也可以通过管道把一个命令的输出用户另一个命令</span></span><br><span class="line"><span class="comment">//下面通过curl跟踪位置，然后通过grep过滤’html’管道来下载example.com网站</span></span><br><span class="line"><span class="keyword">echo</span> sh::grep(<span class="string">&#x27;html&#x27;</span>, sh::curl(<span class="string">&#x27;http://example.com&#x27;</span>, <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">&#x27;location&#x27;</span> =&gt; <span class="keyword">true</span></span><br><span class="line">))); </span><br><span class="line"></span><br><span class="line"><span class="comment">//新建一个文件</span></span><br><span class="line">sh::touch(<span class="string">&#x27;file.html&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//移除文件</span></span><br><span class="line">sh::rm(<span class="string">&#x27;file.html&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//再次移除文件(这次失败了,然后因为文件不存在而抛出异常)</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    sh::rm(<span class="string">&#x27;file.html&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="keyword">Exception</span> $e) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Caught failing sh::rm() call&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当命令行里发生异常时，这个库抛出异常，所以你可以及时对之做出反应。</p>
<p>它也可以通过管道让你一个命令的输出作为另一个命令的输入，来实现更强的灵活性。</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2016/09/interface-api/" rel="prev" title="Php interface 和 api 的区别？">
                  <i class="fa fa-angle-left"></i> Php interface 和 api 的区别？
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2016/09/postman-fiddler/" rel="next" title="Postman Fiddler 使用手册">
                  Postman Fiddler 使用手册 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2015 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Slagga</span>
  </div>
  <div class="powered-by">由 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9waXNjZXMv">NexT.Pisces</span> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdHNsYWdnYQ==" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/comments.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/motion.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/sidebar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/next-boot.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/pjax.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/search/local-search.min.js"></script>




  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/fancybox.min.js"></script>



  




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"gitslagga","repo":"gitslagga.github.io","client_id":"8b03c773267690e6d402","client_secret":"7b2ef82f50c632cdb14c98b7e5928357974cad97","admin_user":"gitslagga","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"3a370cf2395ac7f253c548614c670ce0"}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.0/third-party/comments/gitalk.min.js"></script>

</body>
</html>
